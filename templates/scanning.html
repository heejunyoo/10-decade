{% extends "base.html" %}

{% block title %}System Scanning - Decade Journey{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-16 flex flex-col items-center justify-center min-h-[60vh] text-center">

    <!-- Animated Icon -->
    <div class="relative w-24 h-24 mb-8">
        <div class="absolute inset-0 border-4 border-indigo-100 rounded-full"></div>
        <div class="absolute inset-0 border-4 border-indigo-500 rounded-full border-t-transparent animate-spin"></div>
        <div class="absolute inset-0 flex items-center justify-center">
            <span class="text-3xl">ðŸ‘¤</span>
        </div>
    </div>

    <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100 mb-4">
        Improving Face Recognition...
    </h1>

    <p class="text-lg text-gray-600 dark:text-gray-300 max-w-lg mb-8">
        We are currently re-scanning the entire photo library to strictly differentiate family members using the new
        <strong>Multi-Vector AI Engine</strong>.
    </p>

    <!-- Progress Card -->
    <div
        class="w-full max-w-md bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-100 dark:border-gray-700">
        <div class="flex justify-between text-sm font-medium text-gray-500 dark:text-gray-400 mb-2">
            <span>Progress</span>
            <span id="progress-text">{{ status.progress }} / {{ status.total }}</span>
        </div>

        <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 overflow-hidden">
            {% set pct = (status.progress / status.total * 100)|int if status.total > 0 else 0 %}
            <div class="bg-indigo-600 h-2.5 rounded-full transition-all duration-500" style="width: {{ pct }}%"></div>
        </div>

        <p class="mt-4 text-sm text-center text-indigo-500 animate-pulse">
            {{ status.message }}
        </p>
    </div>

    <p class="mt-8 text-sm text-gray-400">
        This page will auto-refresh every 5 seconds.
    </p>

</div>

<script>
    // Auto Refresh to check if finished
    setTimeout(() => {
        window.location.reload();
    }, 5000);
</script>
{% endblock %}